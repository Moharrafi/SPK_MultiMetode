{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/decision-support-system/app/api/upload/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { promises as fs } from \"fs\"\nimport path from \"path\"\n\nconst UPLOAD_DIR = path.join(process.cwd(), \"public\", \"uploads\")\n\nconst sanitizeExtension = (mimeType: string) => {\n  const ext = mimeType.split(\"/\")[1]?.toLowerCase()\n  if (ext === \"jpeg\") return \"jpg\"\n  if (ext === \"png\" || ext === \"jpg\" || ext === \"webp\") return ext\n  return null\n}\n\nexport async function POST(request: Request) {\n  try {\n    const formData = await request.formData()\n    const file = formData.get(\"file\")\n\n    if (!(file instanceof File)) {\n      return NextResponse.json({ error: \"File is required\" }, { status: 400 })\n    }\n\n    if (!file.type.startsWith(\"image/\")) {\n      return NextResponse.json({ error: \"File must be an image\" }, { status: 400 })\n    }\n\n    const extension = sanitizeExtension(file.type)\n    if (!extension) {\n      return NextResponse.json({ error: \"Unsupported image type\" }, { status: 400 })\n    }\n\n    const bytes = await file.arrayBuffer()\n    const buffer = Buffer.from(bytes)\n    const filename = `logo-${Date.now()}-${Math.random().toString(36).slice(2, 8)}.${extension}`\n\n    await fs.mkdir(UPLOAD_DIR, { recursive: true })\n    await fs.writeFile(path.join(UPLOAD_DIR, filename), buffer)\n\n    return NextResponse.json({ url: `/uploads/${filename}` })\n  } catch (error) {\n    console.error(\"Failed to upload image\", error)\n    return NextResponse.json({ error: \"Failed to upload image\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;AAEtD,MAAM,oBAAoB,CAAC;IACzB,MAAM,MAAM,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;IACpC,IAAI,QAAQ,QAAQ,OAAO;IAC3B,IAAI,QAAQ,SAAS,QAAQ,SAAS,QAAQ,QAAQ,OAAO;IAC7D,OAAO;AACT;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,CAAC,gBAAgB,IAAI,GAAG;YAC3B,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;YACnC,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,YAAY,kBAAkB,KAAK,IAAI;QAC7C,IAAI,CAAC,WAAW;YACd,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,MAAM,QAAQ,MAAM,KAAK,WAAW;QACpC,MAAM,SAAS,OAAO,IAAI,CAAC;QAC3B,MAAM,WAAW,CAAC,KAAK,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,WAAW;QAE5F,MAAM,yGAAE,CAAC,KAAK,CAAC,YAAY;YAAE,WAAW;QAAK;QAC7C,MAAM,yGAAE,CAAC,SAAS,CAAC,4GAAI,CAAC,IAAI,CAAC,YAAY,WAAW;QAEpD,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,KAAK,CAAC,SAAS,EAAE,UAAU;QAAC;IACzD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}